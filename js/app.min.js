$((function(){$(".header__menu-mobile").click((function(e){$(this).toggleClass("_active"),$(".header__menu").toggleClass("_active"),$(".header__wrapper").toggleClass("_active"),$(this).hasClass("_active")&&$("body").data("scroll",$(window).scrollTop()),$("body").toggleClass("_lock"),$(this).hasClass("_active")||$("body,html").scrollTop(parseInt($("body").data("scroll")))})),$(".header__link, .header__phone").click((function(e){$(this).toggleClass("_active"),$(".header__menu").removeClass("_active"),$(".header__menu-mobile").removeClass("_active"),$(".header__wrapper").removeClass("_active"),$(this).hasClass("_active")&&$("body").data("scroll",$(window).scrollTop()),$("body").removeClass("_lock"),$(this).hasClass("_active")||$("body,html").scrollTop(parseInt($("body").data("scroll")))}));let e=document.querySelector(".header__wrapper");function t(e){if(e.addClass("err"),e.parent().addClass("err"),e.parent().find(".form__error").remove(),e.hasClass("email")){var t="";null!=(t=(""==e.val()||(e.val(),e.attr("data-value")),e.data("error")))&&e.parent().append('<div class="form__error">'+t+"</div>")}else null!=e.data("error")&&0==e.parent().find(".form__error").length&&e.parent().append('<div class="form__error">'+e.data("error")+"</div>");e.parents(".select-block").length>0&&(e.parents(".select-block").parent().addClass("err"),e.parents(".select-block").find(".select").addClass("err"))}function a(e){e.removeClass("err"),e.parent().removeClass("err"),e.parent().find(".form__error").remove(),e.parents(".select-block").length>0&&(e.parents(".select-block").parent().removeClass("err"),e.parents(".select-block").find(".select").removeClass("err").removeClass("active"))}function s(e){""==e.val()&&(e.inputmask("remove"),e.hasClass("l")||e.val(e.attr("data-value")),e.removeClass("focus"),e.parent().removeClass("focus"))}e.addEventListener("click",t=>{t.target===e&&this&&($(".header__menu").removeClass("_active"),$(".header__menu-mobile").removeClass("_active"),$(".header__wrapper").removeClass("_active"),$("body").removeClass("_lock"),$(this).hasClass("_active")||$("body,html").scrollTop(parseInt($("body").data("scroll"))))}),$("input,textarea").focus((function(){$(this).val()==$(this).attr("data-value")&&($(this).addClass("focus"),$(this).parent().addClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","password"),$(this).val("")),a($(this))})),$("input[data-value], textarea[data-value]").each((function(){""!=this.value&&this.value!=$(this).attr("data-value")||(this.value=$(this).attr("data-value"),$(this).hasClass("l")&&0==$(this).parent().find(".form__label").length&&$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>")),this.value!=$(this).attr("data-value")&&""!=this.value&&($(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).hasClass("l")&&0==$(this).parent().find(".form__label").length&&$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>")),$(this).click((function(){this.value==$(this).attr("data-value")&&("pass"==$(this).attr("data-type")&&$(this).attr("type","password"),this.value="")})),$(this).blur((function(){""==this.value&&(this.value=$(this).attr("data-value"),$(this).removeClass("focus"),$(this).parent().removeClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","text"))}))})),$("form button[type=submit]").click((function(){var e=0,s=$(this).parents("form"),l=s.data("ms");return $.each(s.find(".req"),(function(s,r){e+=function(e){var s=0,r=e.parents("form");if("email"==e.attr("name")||e.hasClass("email")){if(e.val()!=e.attr("data-value")){var l=e.val().replace(" ","");e.val(l)}/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e.val())&&e.val()!=e.attr("data-value")?a(e):(s++,t(e))}else""==e.val()||e.val()==e.attr("data-value")?(s++,t(e)):a(e);"checkbox"==e.attr("type")&&(1==e.prop("checked")?e.removeClass("err").parent().removeClass("err"):(s++,e.addClass("err").parent().addClass("err")));e.hasClass("name")&&(/^[А-Яа-яa-zA-Z-]+( [А-Яа-яa-zA-Z-]+)$/.test(e.val())||(s++,t(e)));e.hasClass("pass-2")&&(r.find(".pass-1").val()!=r.find(".pass-2").val()?t(e):a(e));return s}($(this))})),0==e&&(function(){if(1!=r)return $("checkbox-style").css({color:"#a31c06"}),!1;{let e=$("#name").val(),t=$("#phone").val(),a=$("#email").val();""!=e.trim()&&""!=t.trim()&""!=a.trim()&&($(this),$.ajax({type:"POST",url:"mail.php",data:{name:e,phone:t,email:a}}).done((function(){setTimeout((function(){$("form").trigger("reset")}),1e3)})))}}(),function(){if(1!=r)return $("popup-checkbox-style").css({color:"#a31c06"}),!1;{let e=$("#name-popup").val(),t=$("#phone-popup").val(),a=$("#email-popup").val();""!=e.trim()&&""!=t.trim()&""!=a.trim()&&($(this),$.ajax({type:"POST",url:"mail.php",data:{name:e,phone:t,email:a}}).done((function(){setTimeout((function(){$("form").trigger("reset")}),1e3)})))}}(),function(e){e.find(".form__generalerror").hide().html("")}(s),null!=l&&""!=l?(function(e){$(".popup").hide(),popupOpen("message."+e,"")}(l),!1):void 0)})),$("._goto").click((function(){var e=$(this).attr("href").replace("#","");return $("body,html").animate({scrollTop:$("."+e).offset().top+0},500,(function(){})),$(".header__menu").hasClass("_active")&&($(".header__menu, .header__menu-mobile").removeClass("_active"),$("body").removeClass("_lock")),!1})),$.each($("input.phone"),(function(e,t){$(this).attr("type","tel"),$(this).focus((function(){$(this).inputmask("+7(999) 999 9999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){s($(this))}}),$(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).parent().removeClass("err"),$(this).removeClass("err")}))})),$("input.phone").focusout((function(e){s($(this))})),$.each($("input.num"),(function(e,t){$(this).focus((function(){$(this).inputmask("9{1,1000}",{clearIncomplete:!0,placeholder:"",clearMaskOnLostFocus:!0,onincomplete:function(){s($(this))}}),$(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).parent().removeClass("err"),$(this).removeClass("err")}))})),$("input.num").focusout((function(e){s($(this))})),$(".timer").startTimer();var r=!0;$(".checkbox__input").click((function(){1==$(this).prop("checked")&&(r=!0),0==$(this).prop("checked")&&(r=!1)})),$(".close-modal").click((function(){$(".modal-ov").fadeOut(300)})),$(document).mouseup((function(e){0===$(".modal").has(e.target).length&&$(".modal-ov").fadeOut(300)})),$(".traffics__btn").click((function(){$(".new-ov").fadeIn(300),$(this).hasClass("cold")&&$(".intergrate").html("Заказать лендинг под холодный трафик"),$(this).hasClass("hot")&&$(".intergrate").html("Заказать лендинг под горячий трафик")})),$(".new-js-close-campaign").click((function(){$(".new-ov").fadeOut(300)})),$(document).mouseup((function(e){0===$(".new-ov").has(e.target).length&&$(".new-ov").fadeOut(300)})),function(){let e=[],t=document.querySelectorAll("[data-da]"),a=[],s=[];if(t.length>0){let n=0;for(let s=0;s<t.length;s++){const r=t[s],o=r.getAttribute("data-da");if(""!=o){const t=o.split(","),s=t[1]?t[1].trim():"last",c=t[2]?t[2].trim():"767",d="min"===t[3]?t[3].trim():"max",h=document.querySelector("."+t[0].trim());t.length>0&&h&&(r.setAttribute("data-da-index",n),e[n]={parent:r.parentNode,index:(l=r,i=void 0,i=Array.prototype.slice.call(l.parentNode.children),i.indexOf(l))},a[n]={element:r,destination:document.querySelector("."+t[0].trim()),place:s,breakpoint:c,type:d},n++)}}(r=a).sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),r.sort((function(e,t){return e.place>t.place?1:-1}));for(let e=0;e<a.length;e++){const t=a[e],r=t.breakpoint,l=t.type;s.push(window.matchMedia("("+l+"-width: "+r+"px)")),s[e].addListener(o)}}var r,l,i;function o(e){for(let e=0;e<a.length;e++){const t=a[e],r=t.element,l=t.destination,i=t.place,o="_dynamic_adapt_"+t.breakpoint;if(s[e].matches){if(!r.classList.contains(o)){let e=c(l)[i];"first"===i?e=c(l)[0]:"last"===i&&(e=c(l)[c(l).length]),l.insertBefore(r,l.children[e]),r.classList.add(o)}}else r.classList.contains(o)&&(n(r),r.classList.remove(o))}}function n(t){const a=t.getAttribute("data-da-index"),s=e[a],r=s.parent,l=s.index,i=c(r,!0)[l];r.insertBefore(t,r.children[i])}function c(e,t){const a=e.children,s=[];for(let e=0;e<a.length;e++){const r=a[e];(t||null==r.getAttribute("data-da"))&&s.push(e)}return s}o()}(),$(".portfolio__item").click((function(e){var t=$(this).data("filter");return 1==t?$(".portfolio__column").show():($(".portfolio__column").hide(),$(".portfolio__column.f_"+t).show()),$(".portfolio__item").removeClass("_active"),$(this).addClass("_active"),!1})),$.each($(".spoller.active"),(function(e,t){$(this).next().show()})),$("body").on("click",".spoller",(function(e){return $(this).parents(".one").length>0&&($(this).parents(".one").find(".spoller").not($(this)).removeClass("_active").next().slideUp(300),$(this).parents(".one").find(".spoller").not($(this)).parent().removeClass("_active")),$(this).hasClass("closeall")&&!$(this).hasClass("_active")&&$.each($(this).closest(".spollers").find(".spoller"),(function(e,t){$(this).removeClass("_active"),$(this).next().slideUp(300)})),$(this).toggleClass("_active").next().slideToggle(300,(function(e,t){$(this).parent().find(".slick-slider").length>0&&$(this).parent().find(".slick-slider").slick("setPosition")})),!1})),$("._gallery").each((function(){$(this).magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0}})}))}));